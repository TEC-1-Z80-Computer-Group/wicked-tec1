parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"4t/b":[function(require,module,exports) {
"use strict";function n(n){var e=n;if(!e||"function"!=typeof e.mem_read||"function"!=typeof e.mem_write||"function"!=typeof e.io_read||"function"!=typeof e.io_write)throw"Z80: Core object is missing required functions.";var i=0,t=0,m=0,r=0,f=0,o=0,u=0,c=0,a=0,_=0,d=0,v=0,Z=0,C=0,w=0,P=0,S=0,H=0,N=57328,l=0,s={S:0,Z:0,Y:0,H:0,X:0,P:0,N:0,C:0},p={S:0,Z:0,Y:0,H:0,X:0,P:0,N:0,C:0},g=0,X=0,Y=0,y=!1,h=!1,b=!1,x=0;var j=function(n){var c=function(n){return 0==(7&n)?t:1==(7&n)?m:2==(7&n)?r:3==(7&n)?f:4==(7&n)?o:5==(7&n)?u:6==(7&n)?e.mem_read(u|o<<8):i};if(118===n)y=!0;else if(n>=64&&n<128){var a=c(n);(56&n)>>>3==0?t=a:(56&n)>>>3==1?m=a:(56&n)>>>3==2?r=a:(56&n)>>>3==3?f=a:(56&n)>>>3==4?o=a:(56&n)>>>3==5?u=a:(56&n)>>>3==6?e.mem_write(u|o<<8,a):(56&n)>>>3==7&&(i=a)}else if(n>=128&&n<192){a=c(n);[J,K,L,Q,T,V,U,R][(56&n)>>>3](a)}else{(0,pn[n])()}x+=Yn[n]},q=function(n){return 128&(n&=255)&&(n=-(1+(255&~n))),n},I=function(){return s.S<<7|s.Z<<6|s.Y<<5|s.H<<4|s.X<<3|s.P<<2|s.N<<1|s.C},M=function(n){s.S=(128&n)>>>7,s.Z=(64&n)>>>6,s.Y=(32&n)>>>5,s.H=(16&n)>>>4,s.X=(8&n)>>>3,s.P=(4&n)>>>2,s.N=(2&n)>>>1,s.C=1&n},O=function(n){s.Y=(32&n)>>>5,s.X=(8&n)>>>3},k=function(n){return[1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1][n]},z=function(n){N=N-1&65535,e.mem_write(N,(65280&n)>>>8),N=N-1&65535,e.mem_write(N,255&n)},A=function(){var n=255&e.mem_read(N);return N=N+1&65535,n|=e.mem_read(N)<<8,N=N+1&65535,n},B=function(n){l=n?(l=e.mem_read(l+1&65535)|e.mem_read(l+2&65535)<<8)-1&65535:l+2&65535},D=function(n){if(n){x+=5;var i=q(e.mem_read(l+1&65535));l=l+i+1&65535}else l=l+1&65535},E=function(n){n?(x+=7,z(l+3&65535),l=(l=e.mem_read(l+1&65535)|e.mem_read(l+2&65535)<<8)-1&65535):l=l+2&65535},F=function(n){n&&(x+=6,l=A()-1&65535)},G=function(n){z(l+1&65535),l=n-1&65535},J=function(n){var e=i+n;s.S=128&e?1:0,s.Z=255&e?0:1,s.H=(15&n)+(15&i)&16?1:0,s.P=(128&i)==(128&n)&&(128&i)!=(128&e)?1:0,s.N=0,s.C=256&e?1:0,O(i=255&e)},K=function(n){var e=i+n+s.C;s.S=128&e?1:0,s.Z=255&e?0:1,s.H=(15&n)+(15&i)+s.C&16?1:0,s.P=(128&i)==(128&n)&&(128&i)!=(128&e)?1:0,s.N=0,s.C=256&e?1:0,O(i=255&e)},L=function(n){var e=i-n;s.S=128&e?1:0,s.Z=255&e?0:1,s.H=(15&i)-(15&n)&16?1:0,s.P=(128&i)!=(128&n)&&(128&i)!=(128&e)?1:0,s.N=1,s.C=256&e?1:0,O(i=255&e)},Q=function(n){var e=i-n-s.C;s.S=128&e?1:0,s.Z=255&e?0:1,s.H=(15&i)-(15&n)-s.C&16?1:0,s.P=(128&i)!=(128&n)&&(128&i)!=(128&e)?1:0,s.N=1,s.C=256&e?1:0,O(i=255&e)},R=function(n){var e=i;L(n),i=e,O(n)},T=function(n){i&=255&n,s.S=128&i?1:0,s.Z=i?0:1,s.H=1,s.P=k(i),s.N=0,s.C=0,O(i)},U=function(n){i=255&(n|i),s.S=128&i?1:0,s.Z=i?0:1,s.H=0,s.P=k(i),s.N=0,s.C=0,O(i)},V=function(n){i=255&(n^i),s.S=128&i?1:0,s.Z=i?0:1,s.H=0,s.P=k(i),s.N=0,s.C=0,O(i)},W=function(n){var e=n+1;return s.S=128&e?1:0,s.Z=255&e?0:1,s.H=15==(15&n)?1:0,s.P=127===n?1:0,s.N=0,O(e&=255),e},$=function(n){var e=n-1;return s.S=128&e?1:0,s.Z=255&e?0:1,s.H=0==(15&n)?1:0,s.P=128===n?1:0,s.N=1,O(e&=255),e},nn=function(n){var e=u|o<<8,i=e+n;s.N=0,s.C=65536&i?1:0,s.H=(4095&e)+(4095&n)&4096?1:0,u=255&i,O(o=(65280&i)>>>8)},en=function(n){n+=s.C;var e=u|o<<8,i=e+n;s.S=32768&i?1:0,s.Z=65535&i?0:1,s.H=(4095&e)+(4095&n)&4096?1:0,s.P=(32768&e)==(32768&n)&&(32768&i)!=(32768&e)?1:0,s.N=0,s.C=65536&i?1:0,u=255&i,O(o=i>>>8&255)},tn=function(n){n+=s.C;var e=u|o<<8,i=e-n;s.S=32768&i?1:0,s.Z=65535&i?0:1,s.H=(4095&e)-(4095&n)&4096?1:0,s.P=(32768&e)!=(32768&n)&&(32768&i)!=(32768&e)?1:0,s.N=1,s.C=65536&i?1:0,u=255&i,O(o=i>>>8&255)},mn=function(n){var i=e.io_read(n);return s.S=128&i?1:0,s.Z=i?0:1,s.H=0,s.P=k(i)?1:0,s.N=0,O(i),i},rn=function(){128!==i&&(i=255&-(i=q(i))),s.S=128&i?1:0,s.Z=i?0:1,s.H=(15&-i)>0?1:0,s.P=128===i?1:0,s.N=1,s.C=i?1:0,O(i)},fn=function(){var n=e.mem_read(u|o<<8);e.mem_write(f|r<<8,n);var c=1+(f|r<<8);f=255&c,r=(65280&c)>>>8,u=255&(c=1+(u|o<<8)),o=(65280&c)>>>8,m=255&(c=(m|t<<8)-1),t=(65280&c)>>>8,s.H=0,s.P=m||t?1:0,s.N=0,s.Y=(i+n&2)>>>1,s.X=(i+n&8)>>>3},on=function(){var n=s.C,r=e.mem_read(u|o<<8);R(r),s.C=n,s.Y=(i-r-s.H&2)>>>1,s.X=(i-r-s.H&8)>>>3;var f=1+(u|o<<8);u=255&f,o=(65280&f)>>>8,m=255&(f=(m|t<<8)-1),t=(65280&f)>>>8,s.P=f?1:0},un=function(){t=$(t),e.mem_write(u|o<<8,e.io_read(t<<8|m));var n=1+(u|o<<8);u=255&n,o=(65280&n)>>>8,s.N=1},cn=function(){e.io_write(t<<8|m,e.mem_read(u|o<<8));var n=1+(u|o<<8);u=255&n,o=(65280&n)>>>8,t=$(t),s.N=1},an=function(){s.N=0,s.H=0;var n=e.mem_read(u|o<<8);e.mem_write(f|r<<8,n);var c=(f|r<<8)-1;f=255&c,r=(65280&c)>>>8,u=255&(c=(u|o<<8)-1),o=(65280&c)>>>8,m=255&(c=(m|t<<8)-1),t=(65280&c)>>>8,s.P=m||t?1:0,s.Y=(i+n&2)>>>1,s.X=(i+n&8)>>>3},_n=function(){var n=s.C,r=e.mem_read(u|o<<8);R(r),s.C=n,s.Y=(i-r-s.H&2)>>>1,s.X=(i-r-s.H&8)>>>3;var f=(u|o<<8)-1;u=255&f,o=(65280&f)>>>8,m=255&(f=(m|t<<8)-1),t=(65280&f)>>>8,s.P=f?1:0},dn=function(){t=$(t),e.mem_write(u|o<<8,e.io_read(t<<8|m));var n=(u|o<<8)-1;u=255&n,o=(65280&n)>>>8,s.N=1},vn=function(){e.io_write(t<<8|m,e.mem_read(u|o<<8));var n=(u|o<<8)-1;u=255&n,o=(65280&n)>>>8,t=$(t),s.N=1},Zn=function(n){return s.N=0,s.H=0,s.C=(128&n)>>>7,n=255&(n<<1|s.C),s.Z=n?0:1,s.P=k(n),s.S=128&n?1:0,O(n),n},Cn=function(n){return s.N=0,s.H=0,s.C=1&n,n=n>>>1&127|s.C<<7,s.Z=255&n?0:1,s.P=k(n),s.S=128&n?1:0,O(n),255&n},wn=function(n){s.N=0,s.H=0;var e=s.C;return s.C=(128&n)>>>7,n=255&(n<<1|e),s.Z=n?0:1,s.P=k(n),s.S=128&n?1:0,O(n),n},Pn=function(n){s.N=0,s.H=0;var e=s.C;return s.C=1&n,n=n>>>1&127|e<<7,s.Z=n?0:1,s.P=k(n),s.S=128&n?1:0,O(n),n},Sn=function(n){return s.N=0,s.H=0,s.C=(128&n)>>>7,n=n<<1&255,s.Z=n?0:1,s.P=k(n),s.S=128&n?1:0,O(n),n},Hn=function(n){return s.N=0,s.H=0,s.C=1&n,n=n>>>1&127|128&n,s.Z=n?0:1,s.P=k(n),s.S=128&n?1:0,O(n),n},Nn=function(n){return s.N=0,s.H=0,s.C=(128&n)>>>7,n=n<<1&255|1,s.Z=n?0:1,s.P=k(n),s.S=128&n?1:0,O(n),n},ln=function(n){return s.N=0,s.H=0,s.C=1&n,n=n>>>1&127,s.Z=n?0:1,s.P=k(n),s.S=0,O(n),n},sn=function(n){s.N=0;var e=w+n;s.C=65536&e?1:0,s.H=(4095&w)+(4095&n)&4096?1:0,O((65280&e)>>>8),w=e},pn=[];pn[0]=function(){},pn[1]=function(){l=l+1&65535,m=e.mem_read(l),l=l+1&65535,t=e.mem_read(l)},pn[2]=function(){e.mem_write(m|t<<8,i)},pn[3]=function(){var n=m|t<<8;m=255&(n+=1),t=(65280&n)>>>8},pn[4]=function(){t=W(t)},pn[5]=function(){t=$(t)},pn[6]=function(){l=l+1&65535,t=e.mem_read(l)},pn[7]=function(){var n=s.S,e=s.Z,t=s.P;i=Zn(i),s.S=n,s.Z=e,s.P=t},pn[8]=function(){var n,e=i;i=c,c=e,e=I(),M(p.S<<7|p.Z<<6|p.Y<<5|p.H<<4|p.X<<3|p.P<<2|p.N<<1|p.C),n=e,p.S=(128&n)>>>7,p.Z=(64&n)>>>6,p.Y=(32&n)>>>5,p.H=(16&n)>>>4,p.X=(8&n)>>>3,p.P=(4&n)>>>2,p.N=(2&n)>>>1,p.C=1&n},pn[9]=function(){nn(m|t<<8)},pn[10]=function(){i=e.mem_read(m|t<<8)},pn[11]=function(){var n=m|t<<8;m=255&(n-=1),t=(65280&n)>>>8},pn[12]=function(){m=W(m)},pn[13]=function(){m=$(m)},pn[14]=function(){l=l+1&65535,m=e.mem_read(l)},pn[15]=function(){var n=s.S,e=s.Z,t=s.P;i=Cn(i),s.S=n,s.Z=e,s.P=t},pn[16]=function(){D(0!==(t=t-1&255))},pn[17]=function(){l=l+1&65535,f=e.mem_read(l),l=l+1&65535,r=e.mem_read(l)},pn[18]=function(){e.mem_write(f|r<<8,i)},pn[19]=function(){var n=f|r<<8;f=255&(n+=1),r=(65280&n)>>>8},pn[20]=function(){r=W(r)},pn[21]=function(){r=$(r)},pn[22]=function(){l=l+1&65535,r=e.mem_read(l)},pn[23]=function(){var n=s.S,e=s.Z,t=s.P;i=wn(i),s.S=n,s.Z=e,s.P=t},pn[24]=function(){var n=q(e.mem_read(l+1&65535));l=l+n+1&65535},pn[25]=function(){nn(f|r<<8)},pn[26]=function(){i=e.mem_read(f|r<<8)},pn[27]=function(){var n=f|r<<8;f=255&(n-=1),r=(65280&n)>>>8},pn[28]=function(){f=W(f)},pn[29]=function(){f=$(f)},pn[30]=function(){l=l+1&65535,f=e.mem_read(l)},pn[31]=function(){var n=s.S,e=s.Z,t=s.P;i=Pn(i),s.S=n,s.Z=e,s.P=t},pn[32]=function(){D(!s.Z)},pn[33]=function(){l=l+1&65535,u=e.mem_read(l),l=l+1&65535,o=e.mem_read(l)},pn[34]=function(){l=l+1&65535;var n=e.mem_read(l);l=l+1&65535,n|=e.mem_read(l)<<8,e.mem_write(n,u),e.mem_write(n+1&65535,o)},pn[35]=function(){var n=u|o<<8;u=255&(n+=1),o=(65280&n)>>>8},pn[36]=function(){o=W(o)},pn[37]=function(){o=$(o)},pn[38]=function(){l=l+1&65535,o=e.mem_read(l)},pn[39]=function(){var n=i;s.N?((s.H||(15&i)>9)&&(n-=6),(s.C||i>153)&&(n-=96)):((s.H||(15&i)>9)&&(n+=6),(s.C||i>153)&&(n+=96)),s.S=128&n?1:0,s.Z=255&n?0:1,s.H=16&i^16&n?1:0,s.P=k(255&n),s.C=s.C||i>153?1:0,O(i=255&n)},pn[40]=function(){D(!!s.Z)},pn[41]=function(){nn(u|o<<8)},pn[42]=function(){l=l+1&65535;var n=e.mem_read(l);l=l+1&65535,n|=e.mem_read(l)<<8,u=e.mem_read(n),o=e.mem_read(n+1&65535)},pn[43]=function(){var n=u|o<<8;u=255&(n-=1),o=(65280&n)>>>8},pn[44]=function(){u=W(u)},pn[45]=function(){u=$(u)},pn[46]=function(){l=l+1&65535,u=e.mem_read(l)},pn[47]=function(){i=255&~i,s.N=1,s.H=1,O(i)},pn[48]=function(){D(!s.C)},pn[49]=function(){N=e.mem_read(l+1&65535)|e.mem_read(l+2&65535)<<8,l=l+2&65535},pn[50]=function(){l=l+1&65535;var n=e.mem_read(l);l=l+1&65535,n|=e.mem_read(l)<<8,e.mem_write(n,i)},pn[51]=function(){N=N+1&65535},pn[52]=function(){var n=u|o<<8;e.mem_write(n,W(e.mem_read(n)))},pn[53]=function(){var n=u|o<<8;e.mem_write(n,$(e.mem_read(n)))},pn[54]=function(){l=l+1&65535,e.mem_write(u|o<<8,e.mem_read(l))},pn[55]=function(){s.N=0,s.H=0,s.C=1,O(i)},pn[56]=function(){D(!!s.C)},pn[57]=function(){nn(N)},pn[58]=function(){l=l+1&65535;var n=e.mem_read(l);l=l+1&65535,n|=e.mem_read(l)<<8,i=e.mem_read(n)},pn[59]=function(){N=N-1&65535},pn[60]=function(){i=W(i)},pn[61]=function(){i=$(i)},pn[62]=function(){i=e.mem_read(l+1&65535),l=l+1&65535},pn[63]=function(){s.N=0,s.H=s.C,s.C=s.C?0:1,O(i)},pn[192]=function(){F(!s.Z)},pn[193]=function(){var n=A();m=255&n,t=(65280&n)>>>8},pn[194]=function(){B(!s.Z)},pn[195]=function(){l=(l=e.mem_read(l+1&65535)|e.mem_read(l+2&65535)<<8)-1&65535},pn[196]=function(){E(!s.Z)},pn[197]=function(){z(m|t<<8)},pn[198]=function(){l=l+1&65535,J(e.mem_read(l))},pn[199]=function(){G(0)},pn[200]=function(){F(!!s.Z)},pn[201]=function(){l=A()-1&65535},pn[202]=function(){B(!!s.Z)},pn[203]=function(){H=128&H|1+(127&H)&127,l=l+1&65535;var n=e.mem_read(l),c=(56&n)>>>3,a=7&n;if(n<64){var _=[Zn,Cn,wn,Pn,Sn,Hn,Nn,ln];0===a?t=_[c](t):1===a?m=_[c](m):2===a?r=_[c](r):3===a?f=_[c](f):4===a?o=_[c](o):5===a?u=_[c](u):6===a?e.mem_write(u|o<<8,_[c](e.mem_read(u|o<<8))):7===a&&(i=_[c](i))}else n<128?(0===a?s.Z=t&1<<c?0:1:1===a?s.Z=m&1<<c?0:1:2===a?s.Z=r&1<<c?0:1:3===a?s.Z=f&1<<c?0:1:4===a?s.Z=o&1<<c?0:1:5===a?s.Z=u&1<<c?0:1:6===a?s.Z=e.mem_read(u|o<<8)&1<<c?0:1:7===a&&(s.Z=i&1<<c?0:1),s.N=0,s.H=1,s.P=s.Z,s.S=7!==c||s.Z?0:1,s.Y=5!==c||s.Z?0:1,s.X=3!==c||s.Z?0:1):n<192?0===a?t&=255&~(1<<c):1===a?m&=255&~(1<<c):2===a?r&=255&~(1<<c):3===a?f&=255&~(1<<c):4===a?o&=255&~(1<<c):5===a?u&=255&~(1<<c):6===a?e.mem_write(u|o<<8,e.mem_read(u|o<<8)&~(1<<c)):7===a&&(i&=255&~(1<<c)):0===a?t|=1<<c:1===a?m|=1<<c:2===a?r|=1<<c:3===a?f|=1<<c:4===a?o|=1<<c:5===a?u|=1<<c:6===a?e.mem_write(u|o<<8,e.mem_read(u|o<<8)|1<<c):7===a&&(i|=1<<c);x+=hn[n]},pn[204]=function(){E(!!s.Z)},pn[205]=function(){z(l+3&65535),l=(l=e.mem_read(l+1&65535)|e.mem_read(l+2&65535)<<8)-1&65535},pn[206]=function(){l=l+1&65535,K(e.mem_read(l))},pn[207]=function(){G(8)},pn[208]=function(){F(!s.C)},pn[209]=function(){var n=A();f=255&n,r=(65280&n)>>>8},pn[210]=function(){B(!s.C)},pn[211]=function(){l=l+1&65535,e.io_write(i<<8|e.mem_read(l),i)},pn[212]=function(){E(!s.C)},pn[213]=function(){z(f|r<<8)},pn[214]=function(){l=l+1&65535,L(e.mem_read(l))},pn[215]=function(){G(16)},pn[216]=function(){F(!!s.C)},pn[217]=function(){var n=t;t=a,a=n,n=m,m=_,_=n,n=r,r=d,d=n,n=f,f=v,v=n,n=o,o=Z,Z=n,n=u,u=C,C=n},pn[218]=function(){B(!!s.C)},pn[219]=function(){l=l+1&65535,i=e.io_read(i<<8|e.mem_read(l))},pn[220]=function(){E(!!s.C)},pn[221]=function(){H=128&H|1+(127&H)&127,l=l+1&65535;var n=e.mem_read(l),i=Xn[n];i?(i(),x+=bn[n]):(l=l-1&65535,x+=Yn[0])},pn[222]=function(){l=l+1&65535,Q(e.mem_read(l))},pn[223]=function(){G(24)},pn[224]=function(){F(!s.P)},pn[225]=function(){var n=A();u=255&n,o=(65280&n)>>>8},pn[226]=function(){B(!s.P)},pn[227]=function(){var n=e.mem_read(N);e.mem_write(N,u),u=n,n=e.mem_read(N+1&65535),e.mem_write(N+1&65535,o),o=n},pn[228]=function(){E(!s.P)},pn[229]=function(){z(u|o<<8)},pn[230]=function(){l=l+1&65535,T(e.mem_read(l))},pn[231]=function(){G(32)},pn[232]=function(){F(!!s.P)},pn[233]=function(){l=(l=u|o<<8)-1&65535},pn[234]=function(){B(!!s.P)},pn[235]=function(){var n=r;r=o,o=n,n=f,f=u,u=n},pn[236]=function(){E(!!s.P)},pn[237]=function(){H=128&H|1+(127&H)&127,l=l+1&65535;var n=e.mem_read(l),i=gn[n];i?(i(),x+=yn[n]):x+=Yn[0]},pn[238]=function(){l=l+1&65535,V(e.mem_read(l))},pn[239]=function(){G(40)},pn[240]=function(){F(!s.S)},pn[241]=function(){var n=A();M(255&n),i=(65280&n)>>>8},pn[242]=function(){B(!s.S)},pn[243]=function(){h=!0},pn[244]=function(){E(!s.S)},pn[245]=function(){z(I()|i<<8)},pn[246]=function(){l=l+1&65535,U(e.mem_read(l))},pn[247]=function(){G(48)},pn[248]=function(){F(!!s.S)},pn[249]=function(){N=u|o<<8},pn[250]=function(){B(!!s.S)},pn[251]=function(){b=!0},pn[252]=function(){E(!!s.S)},pn[253]=function(){H=128&H|1+(127&H)&127,l=l+1&65535;var n=e.mem_read(l),i=Xn[n];if(i){var t=w;w=P,i(),P=w,w=t,x+=bn[n]}else l=l-1&65535,x+=Yn[0]},pn[254]=function(){l=l+1&65535,R(e.mem_read(l))},pn[255]=function(){G(56)};var gn=[];gn[64]=function(){t=mn(t<<8|m)},gn[65]=function(){e.io_write(t<<8|m,t)},gn[66]=function(){tn(m|t<<8)},gn[67]=function(){l=l+1&65535;var n=e.mem_read(l);l=l+1&65535,n|=e.mem_read(l)<<8,e.mem_write(n,m),e.mem_write(n+1&65535,t)},gn[68]=function(){rn()},gn[69]=function(){l=A()-1&65535,X=Y},gn[70]=function(){g=0},gn[71]=function(){S=i},gn[72]=function(){m=mn(t<<8|m)},gn[73]=function(){e.io_write(t<<8|m,m)},gn[74]=function(){en(m|t<<8)},gn[75]=function(){l=l+1&65535;var n=e.mem_read(l);l=l+1&65535,n|=e.mem_read(l)<<8,m=e.mem_read(n),t=e.mem_read(n+1&65535)},gn[76]=function(){rn()},gn[77]=function(){l=A()-1&65535},gn[78]=function(){g=0},gn[79]=function(){H=i},gn[80]=function(){r=mn(t<<8|m)},gn[81]=function(){e.io_write(t<<8|m,r)},gn[82]=function(){tn(f|r<<8)},gn[83]=function(){l=l+1&65535;var n=e.mem_read(l);l=l+1&65535,n|=e.mem_read(l)<<8,e.mem_write(n,f),e.mem_write(n+1&65535,r)},gn[84]=function(){rn()},gn[85]=function(){l=A()-1&65535,X=Y},gn[86]=function(){g=1},gn[87]=function(){i=S,s.S=128&S?1:0,s.Z=S?0:1,s.H=0,s.P=Y,s.N=0},gn[88]=function(){f=mn(t<<8|m)},gn[89]=function(){e.io_write(t<<8|m,f)},gn[90]=function(){en(f|r<<8)},gn[91]=function(){l=l+1&65535;var n=e.mem_read(l);l=l+1&65535,n|=e.mem_read(l)<<8,f=e.mem_read(n),r=e.mem_read(n+1&65535)},gn[92]=function(){rn()},gn[93]=function(){l=A()-1&65535,X=Y},gn[94]=function(){g=2},gn[95]=function(){i=H,s.P=Y},gn[96]=function(){o=mn(t<<8|m)},gn[97]=function(){e.io_write(t<<8|m,o)},gn[98]=function(){tn(u|o<<8)},gn[99]=function(){l=l+1&65535;var n=e.mem_read(l);l=l+1&65535,n|=e.mem_read(l)<<8,e.mem_write(n,u),e.mem_write(n+1&65535,o)},gn[100]=function(){rn()},gn[101]=function(){l=A()-1&65535,X=Y},gn[102]=function(){g=0},gn[103]=function(){var n=e.mem_read(u|o<<8),t=15&n;n=(240&n)>>>4|(15&i)<<4,i=240&i|t,e.mem_write(u|o<<8,n),s.S=128&i?1:0,s.Z=i?0:1,s.H=0,s.P=k(i)?1:0,s.N=0,O(i)},gn[104]=function(){u=mn(t<<8|m)},gn[105]=function(){e.io_write(t<<8|m,u)},gn[106]=function(){en(u|o<<8)},gn[107]=function(){l=l+1&65535;var n=e.mem_read(l);l=l+1&65535,n|=e.mem_read(l)<<8,u=e.mem_read(n),o=e.mem_read(n+1&65535)},gn[108]=function(){rn()},gn[109]=function(){l=A()-1&65535,X=Y},gn[110]=function(){g=0},gn[111]=function(){var n=e.mem_read(u|o<<8),t=240&n;n=(15&n)<<4|15&i,i=240&i|t>>>4,e.mem_write(u|o<<8,n),s.S=128&i?1:0,s.Z=i?0:1,s.H=0,s.P=k(i)?1:0,s.N=0,O(i)},gn[112]=function(){mn(t<<8|m)},gn[113]=function(){e.io_write(t<<8|m,0)},gn[114]=function(){tn(N)},gn[115]=function(){l=l+1&65535;var n=e.mem_read(l);l=l+1&65535,n|=e.mem_read(l)<<8,e.mem_write(n,255&N),e.mem_write(n+1&65535,N>>>8&255)},gn[116]=function(){rn()},gn[117]=function(){l=A()-1&65535,X=Y},gn[118]=function(){g=1},gn[120]=function(){i=mn(t<<8|m)},gn[121]=function(){e.io_write(t<<8|m,i)},gn[122]=function(){en(N)},gn[123]=function(){l=l+1&65535;var n=e.mem_read(l);l=l+1&65535,n|=e.mem_read(l)<<8,N=e.mem_read(n),N|=e.mem_read(n+1&65535)<<8},gn[124]=function(){rn()},gn[125]=function(){l=A()-1&65535,X=Y},gn[126]=function(){g=2},gn[160]=function(){fn()},gn[161]=function(){on()},gn[162]=function(){un()},gn[163]=function(){cn()},gn[168]=function(){an()},gn[169]=function(){_n()},gn[170]=function(){dn()},gn[171]=function(){vn()},gn[176]=function(){fn(),(t||m)&&(x+=5,l=l-2&65535)},gn[177]=function(){on(),s.Z||!t&&!m||(x+=5,l=l-2&65535)},gn[178]=function(){un(),t&&(x+=5,l=l-2&65535)},gn[179]=function(){cn(),t&&(x+=5,l=l-2&65535)},gn[184]=function(){an(),(t||m)&&(x+=5,l=l-2&65535)},gn[185]=function(){_n(),s.Z||!t&&!m||(x+=5,l=l-2&65535)},gn[186]=function(){dn(),t&&(x+=5,l=l-2&65535)},gn[187]=function(){vn(),t&&(x+=5,l=l-2&65535)};var Xn=[];Xn[9]=function(){sn(m|t<<8)},Xn[25]=function(){sn(f|r<<8)},Xn[33]=function(){l=l+1&65535,w=e.mem_read(l),l=l+1&65535,w|=e.mem_read(l)<<8},Xn[34]=function(){l=l+1&65535;var n=e.mem_read(l);l=l+1&65535,n|=e.mem_read(l)<<8,e.mem_write(n,255&w),e.mem_write(n+1&65535,w>>>8&255)},Xn[35]=function(){w=w+1&65535},Xn[36]=function(){w=W(w>>>8)<<8|255&w},Xn[37]=function(){w=$(w>>>8)<<8|255&w},Xn[38]=function(){l=l+1&65535,w=e.mem_read(l)<<8|255&w},Xn[41]=function(){sn(w)},Xn[42]=function(){l=l+1&65535;var n=e.mem_read(l);l=l+1&65535,n|=e.mem_read(l)<<8,w=e.mem_read(n),w|=e.mem_read(n+1&65535)<<8},Xn[43]=function(){w=w-1&65535},Xn[44]=function(){w=W(255&w)|65280&w},Xn[45]=function(){w=$(255&w)|65280&w},Xn[46]=function(){l=l+1&65535,w=255&e.mem_read(l)|65280&w},Xn[52]=function(){l=l+1&65535;var n=q(e.mem_read(l)),i=e.mem_read(n+w&65535);e.mem_write(n+w&65535,W(i))},Xn[53]=function(){l=l+1&65535;var n=q(e.mem_read(l)),i=e.mem_read(n+w&65535);e.mem_write(n+w&65535,$(i))},Xn[54]=function(){l=l+1&65535;var n=q(e.mem_read(l));l=l+1&65535,e.mem_write(w+n&65535,e.mem_read(l))},Xn[57]=function(){sn(N)},Xn[68]=function(){t=w>>>8&255},Xn[69]=function(){t=255&w},Xn[70]=function(){l=l+1&65535;var n=q(e.mem_read(l));t=e.mem_read(w+n&65535)},Xn[76]=function(){m=w>>>8&255},Xn[77]=function(){m=255&w},Xn[78]=function(){l=l+1&65535;var n=q(e.mem_read(l));m=e.mem_read(w+n&65535)},Xn[84]=function(){r=w>>>8&255},Xn[85]=function(){r=255&w},Xn[86]=function(){l=l+1&65535;var n=q(e.mem_read(l));r=e.mem_read(w+n&65535)},Xn[92]=function(){f=w>>>8&255},Xn[93]=function(){f=255&w},Xn[94]=function(){l=l+1&65535;var n=q(e.mem_read(l));f=e.mem_read(w+n&65535)},Xn[96]=function(){w=255&w|t<<8},Xn[97]=function(){w=255&w|m<<8},Xn[98]=function(){w=255&w|r<<8},Xn[99]=function(){w=255&w|f<<8},Xn[100]=function(){},Xn[101]=function(){w=255&w|(255&w)<<8},Xn[102]=function(){l=l+1&65535;var n=q(e.mem_read(l));o=e.mem_read(w+n&65535)},Xn[103]=function(){w=255&w|i<<8},Xn[104]=function(){w=65280&w|t},Xn[105]=function(){w=65280&w|m},Xn[106]=function(){w=65280&w|r},Xn[107]=function(){w=65280&w|f},Xn[108]=function(){w=65280&w|w>>>8},Xn[109]=function(){},Xn[110]=function(){l=l+1&65535;var n=q(e.mem_read(l));u=e.mem_read(w+n&65535)},Xn[111]=function(){w=65280&w|i},Xn[112]=function(){l=l+1&65535;var n=q(e.mem_read(l));e.mem_write(w+n&65535,t)},Xn[113]=function(){l=l+1&65535;var n=q(e.mem_read(l));e.mem_write(w+n&65535,m)},Xn[114]=function(){l=l+1&65535;var n=q(e.mem_read(l));e.mem_write(w+n&65535,r)},Xn[115]=function(){l=l+1&65535;var n=q(e.mem_read(l));e.mem_write(w+n&65535,f)},Xn[116]=function(){l=l+1&65535;var n=q(e.mem_read(l));e.mem_write(w+n&65535,o)},Xn[117]=function(){l=l+1&65535;var n=q(e.mem_read(l));e.mem_write(w+n&65535,u)},Xn[119]=function(){l=l+1&65535;var n=q(e.mem_read(l));e.mem_write(w+n&65535,i)},Xn[124]=function(){i=w>>>8&255},Xn[125]=function(){i=255&w},Xn[126]=function(){l=l+1&65535;var n=q(e.mem_read(l));i=e.mem_read(w+n&65535)},Xn[132]=function(){J(w>>>8&255)},Xn[133]=function(){J(255&w)},Xn[134]=function(){l=l+1&65535;var n=q(e.mem_read(l));J(e.mem_read(w+n&65535))},Xn[140]=function(){K(w>>>8&255)},Xn[141]=function(){K(255&w)},Xn[142]=function(){l=l+1&65535;var n=q(e.mem_read(l));K(e.mem_read(w+n&65535))},Xn[148]=function(){L(w>>>8&255)},Xn[149]=function(){L(255&w)},Xn[150]=function(){l=l+1&65535;var n=q(e.mem_read(l));L(e.mem_read(w+n&65535))},Xn[156]=function(){Q(w>>>8&255)},Xn[157]=function(){Q(255&w)},Xn[158]=function(){l=l+1&65535;var n=q(e.mem_read(l));Q(e.mem_read(w+n&65535))},Xn[164]=function(){T(w>>>8&255)},Xn[165]=function(){T(255&w)},Xn[166]=function(){l=l+1&65535;var n=q(e.mem_read(l));T(e.mem_read(w+n&65535))},Xn[172]=function(){V(w>>>8&255)},Xn[173]=function(){V(255&w)},Xn[174]=function(){l=l+1&65535;var n=q(e.mem_read(l));V(e.mem_read(w+n&65535))},Xn[180]=function(){U(w>>>8&255)},Xn[181]=function(){U(255&w)},Xn[182]=function(){l=l+1&65535;var n=q(e.mem_read(l));U(e.mem_read(w+n&65535))},Xn[188]=function(){R(w>>>8&255)},Xn[189]=function(){R(255&w)},Xn[190]=function(){l=l+1&65535;var n=q(e.mem_read(l));R(e.mem_read(w+n&65535))},Xn[203]=function(){l=l+1&65535;var n=q(e.mem_read(l));l=l+1&65535;var c=e.mem_read(l);if(c<64){var a=(0,[Zn,Cn,wn,Pn,Sn,Hn,Nn,ln][(56&c)>>>3])(e.mem_read(w+n&65535));e.mem_write(w+n&65535,a)}else{var _=(56&c)>>>3;c<128?(s.N=0,s.H=1,s.Z=e.mem_read(w+n&65535)&1<<_?0:1,s.P=s.Z,s.S=7!==_||s.Z?0:1):c<192?(a=e.mem_read(w+n&65535)&~(1<<_)&255,e.mem_write(w+n&65535,a)):(a=e.mem_read(w+n&65535)|1<<_,e.mem_write(w+n&65535,a))}void 0!==a&&(0==(7&c)?t=a:1==(7&c)?m=a:2==(7&c)?r=a:3==(7&c)?f=a:4==(7&c)?o=a:5==(7&c)?u=a:7==(7&c)&&(i=a)),x+=hn[c]+8},Xn[225]=function(){w=A()},Xn[227]=function(){var n=w;w=e.mem_read(N),w|=e.mem_read(N+1&65535)<<8,e.mem_write(N,255&n),e.mem_write(N+1&65535,n>>>8&255)},Xn[229]=function(){z(w)},Xn[233]=function(){l=w-1&65535},Xn[249]=function(){N=w};var Yn=[4,10,7,6,4,4,7,4,4,11,7,6,4,4,7,4,8,10,7,6,4,4,7,4,12,11,7,6,4,4,7,4,7,10,16,6,4,4,7,4,7,11,16,6,4,4,7,4,7,10,13,6,11,11,10,4,7,11,13,6,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,7,7,7,7,7,7,4,7,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,5,10,10,10,10,11,7,11,5,10,10,0,10,17,7,11,5,10,10,11,10,11,7,11,5,4,10,11,10,0,7,11,5,10,10,19,10,11,7,11,5,4,10,4,10,0,7,11,5,10,10,4,10,11,7,11,5,6,10,4,10,0,7,11],yn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,18,12,12,15,20,8,14,8,18,12,12,15,20,8,14,8,0,12,12,15,20,8,14,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,16,16,16,0,0,0,0,16,16,16,16,0,0,0,0,16,16,16,16,0,0,0,0,16,16,16,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],hn=[8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8],bn=[0,0,0,0,0,0,0,0,0,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,0,0,0,14,20,10,8,8,11,0,0,15,20,10,8,8,11,0,0,0,0,0,23,23,19,0,0,15,0,0,0,0,0,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,8,8,8,8,8,8,19,8,8,8,8,8,8,8,19,8,19,19,19,19,19,19,0,19,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,23,0,15,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0];return{getState:function(){return{b:t,a:i,c:m,d:r,e:f,h:o,l:u,a_prime:c,b_prime:a,c_prime:_,d_prime:d,e_prime:v,h_prime:Z,l_prime:C,ix:w,iy:P,i:S,r:H,sp:N,pc:l,flags:{S:s.S,Z:s.Z,Y:s.Y,H:s.H,X:s.X,P:s.P,N:s.N,C:s.C},flags_prime:{S:p.S,Z:p.Z,Y:p.Y,H:p.H,X:p.X,P:p.P,N:p.N,C:p.C},imode:g,iff1:X,iff2:Y,halted:y,do_delayed_di:h,do_delayed_ei:b,cycle_counter:x}},setState:function(n){t=n.b,i=n.a,m=n.c,r=n.d,f=n.e,o=n.h,u=n.l,c=n.a_prime,a=n.b_prime,_=n.c_prime,d=n.d_prime,v=n.e_prime,Z=n.h_prime,C=n.l_prime,w=n.ix,P=n.iy,S=n.i,H=n.r,N=n.sp,l=n.pc,s.S=n.flags.S,s.Z=n.flags.Z,s.Y=n.flags.Y,s.H=n.flags.H,s.X=n.flags.X,s.P=n.flags.P,s.N=n.flags.N,s.C=n.flags.C,p.S=n.flags_prime.S,p.Z=n.flags_prime.Z,p.Y=n.flags_prime.Y,p.H=n.flags_prime.H,p.X=n.flags_prime.X,p.P=n.flags_prime.P,p.N=n.flags_prime.N,p.C=n.flags_prime.C,g=n.imode,X=n.iff1,Y=n.iff2,y=n.halted,h=n.do_delayed_di,b=n.do_delayed_ei,x=n.cycle_counter},reset:function(){N=57328,l=0,i=0,H=0,M(0),g=0,X=0,Y=0,y=!1,h=!1,b=!1,x=0},reset1:function(){N=57328,l=0,y=!1},run_instruction:function(){if(y)return 1;var n=!1,i=!1;h?(h=!1,n=!0):b&&(b=!1,i=!0),H=128&H|1+(127&H)&127;var t=e.mem_read(l);try{j(t)}catch(f){console.log("Illegal opcode "+t+" at "+l),y=!0}l=l+1&65535,n?(X=0,Y=0):i&&(X=1,Y=1);var m=x;return x=0,m},interrupt:function(n,i){if(n)H=128&H|1+(127&H)&127,y=!1,Y=X,X=0,z(l),l=102,x+=11;else if(X)if(H=128&H|1+(127&H)&127,y=!1,X=0,Y=0,0===g)j(i),x+=2;else if(1===g)z(l),l=56,x+=13;else if(2===g){z(l);var t=S<<8|i;l=e.mem_read(t)|e.mem_read(t+1&65535)<<8,x+=19}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Z80=n;
},{}],"WI5q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var F=exports.ROM=":10000000C3F005FFFFFFFFFFC32003FFFFFFFFFF5C\n:10001000C3E003FFFFFFFFFFC39004FFFFFFFFFFED\n:10002000FFFFFFFFFFFFFFFF213002C34100FFFF83\n:10003000213005C34100FFFFC7FFFFFFFFFFFFFFA8\n:10004000FF220008C3B001FFFFFFFFFFFFFFFFFF1C\n:10005000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB0\n:10006000FFFFFFFFFFFFDB00E61FED47C931D00FA9\n:10007000CD3101CD8E013AF90FFE00C29600ED5749\n:10008000FE10DA8800C3E30021F70FCD6F01ED6F9A\n:1000900023ED6FC3DA00ED57FE10DAB700AF32FA86\n:1000A0000FED57FE13CADA00FE12CAC200FE11CAD3\n:1000B000C600FE10CAD0002AF70FCD7B01ED6FC33A\n:1000C000E3002AF70FE92AF70F2B22F70FC3E3000B\n:1000D0002AF70F2322F70FC3E3003E00060421F3A3\n:1000E0000F18073E67060221F10F32F90FD9ED5BB9\n:1000F000F70FCD02011ACD0E01D9CBE62310FBC3B9\n:100100006D0021F30F7BCD15017ACD1501C921F1C9\n:100110000FCD1501C9F5CD26017723F10F0F0F0F74\n:10012000CD26017723C9E5215F01E60F856F7EE1CA\n:10013000C93EFFED47CD4001ED57FEFFC0C3310181\n:10014000DDE5010106DD7E00D302DD2379D301CB9D\n:10015000274F3E0A3DC25401D30110E9DDE1C9EB4E\n:1001600028CDAD2EA7E729EF2F6FE6C3ECC747CD0B\n:100170007B01C0233E00772BED57C9ED57473AFA74\n:100180000FFE0078C0AF773D32FA0F78C9000E0A33\n:1001900021500029110100AFD3023DD3014110FECF\n:1001A000EE80ED5220F5C9FFFFFFFFFFFFFFFFFFCD\n:1001B000ED5B00081AE61FFE1FC80000FE1ECAB055\n:1001C00001FE00CAE9014713D521F801CDE301F58D\n:1001D00078211002CDE3016F2600F14FCD9301D1BC\n:1001E000C3B4015F1600197EC9D51100101B7AB384\n:1001F000C2ED01D113C3B4018C837C757067625C5E\n:1002000057524E4845413C3936322F2C2A27252358\n:10021000191A1C1D1E20232527292C2E3133373A6D\n:100220003D4145494D52575C10FFFFFFFFFFFFFF67\n:1002300006060A0D060D0A0D121614120F11120FE2\n:100240000D0D0D0A120F0D0A0806080A0F0A0D0FF0\n:1002500006060A0D060D0A0D121614120F11120FC2\n:100260000D0D0D0A120F0D0A0806080A0612001ECF\n:10027000FD2A0008DD21F10F060621F10F360023CB\n:1002800010FB060611F70F21F60F7E122B1B10FA3A\n:10029000FD7E00FD23E61FFE1FC8FE1E28D221B3EF\n:1002A00002CDE30132F10F3E80F5CD4001F13D205A\n:1002B000F818CF006FE6C3ECC747E36E28E8CEC25C\n:1002C0006BEB4F2F43A746EAE0AECD0410180000B9\n:1002D0000008050C0C0E0013080511050013080991\n:1002E0001200091200130805001305031809191953\n:1002F000191904051209070D0504000216000A0E5B\n:10030000080D00080111041600060E110013051A4D\n:100310000000000000001EFFFFFFFFFFFFFFFFFFC8\n:10032000DD21F10FAF32FA0F32FB0F060621F10F7C\n:1003300036002310FB3AF50FFE00203711F50F2190\n:10034000F40F06047E122B1B10FAED5FCDB50332BD\n:10035000F10F3E0000F53EFFED473AFB0FCDB50330\n:1003600032F60FCD4001ED57FEFFC48E03F13D2064\n:10037000E418C2CD8E01060621F10F36002310FBD2\n:100380003AFA0F21F30FCD1501CD31011892FE106D\n:1003900020083AFB0F3C32FB0FC93AF60F4F21F50C\n:1003A0000F06057EB9200A36003AFA0F3C2732FACA\n:1003B0000F2B10EFC9E607CD2601C9160E14000C4D\n:1003C0000E1205001213140F09041A1F0E08000D57\n:1003D0000E19191909000C0E12131A1FFFFFFFFF47\n:1003E000DD21F10F3E2332FA0F21F10F0606360010\n:1003F0002310FB1E00CD6604CD3101ED57FE043005\n:10040000F4FE0028F05F3AFA0FBB284438429327E5\n:1004100032FA0FCD660421F60F36AE1600CD40013C\n:100420001520FA3AFA0FFE01282C3D27D604273072\n:10043000FBC60427FE0028105F3AFA0F932732FA12\n:100440000F21F60F362818ADED5FE603282818E8CF\n:1004500011BB03C3590411CC03ED530008CD700246\n:10046000CD3101C3E00321F10F3AFA0FCD1501237D\n:100470007BCD260177C93CC33804FF14121417172B\n:100480001214101F0111011101111FFFFFFFFFFFC7\n:10049000DD21F10FFD2100083E50FD77003E20FDDB\n:1004A0007701AFFD770221F10F060636002310FB1E\n:1004B0001680FD7E0121F10FCD15012323FD7E0065\n:1004C000CD15013EFFED47CD4001ED57FEFFC4F3D2\n:1004D0000415C2B204FD7E02D60127FD770247FD56\n:1004E0007E008027FE00CA1105FE60301BFD7700EC\n:1004F000C3B004FD7E01FE00C83D27FD7701FD7EEF\n:1005000002C60227FD7702C9118404DD210000180C\n:1005100003117B04ED530008CDB001CD3101C39030\n:1005200004FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFD6\n:100530000B0A080A0A0A0606060B0A080A0A0A0A29\n:100540000A0A0B0A080A0A0A0606060A080A0D0D14\n:100550000D0D0D000D05080B0B0B0606060B0A080A\n:100560000A0A0A0606060B0A0608080808080A0B03\n:100570000A080606060606060000001EFFFFFFFF2B\n:1005800021000831D00FDD21F10F22F70FAF32F932\n:100590000F32FA0F0E0A215000CD93010E202130A8\n:1005A00000CD9301C3E300FFFFFFFFFFFFFFFFFF4D\n:1005B00021000811000B7EFEFFC2C205210008C306\n:1005C000B605D3031AFEFFC2D00511000BC3C40544\n:1005D000D304CDE105131AD304CDE1051323C3B62B\n:1005E0000501FF030B78B1C2E405C9FFFFFFFFFF60\n:1005F000ED73D80F31F00FF5C5D5E5DDE5FDE50864\n:10060000D9F5C5D5E5ED57F5C38005FFFFFFFFFF21\n:10061000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEA\n:10062000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFDA\n:10063000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFCA\n:10064000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFBA\n:10065000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFAA\n:10066000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF9A\n:10067000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF8A\n:10068000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7A\n:10069000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF6A\n:1006A000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5A\n:1006B000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF4A\n:1006C000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF3A\n:1006D000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF2A\n:1006E000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1A\n:1006F000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0A\n:10070000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF9\n:10071000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE9\n:10072000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFD9\n:10073000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC9\n:10074000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB9\n:10075000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA9\n:10076000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF99\n:10077000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF89\n:10078000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF79\n:10079000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF69\n:1007A000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF59\n:1007B000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF49\n:1007C000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF39\n:1007D000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF29\n:1007E000FFFF6AC7FBC7500A93C7FBC78DC6BF0D83\n:1007F000B1C643010BBC000FE00F6D0143016E0851\n:00000001FF\n";
},{}],"wz54":[function(require,module,exports) {
var define;
var global = arguments[3];
var r,t=arguments[3];!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof r&&r.amd?r(e):t.MemoryMap=e()}(this,function(){"use strict";var r=/:([0-9A-Fa-f]{8,})([0-9A-Fa-f]{2})(?:\r\n|\r|\n|)/g;function t(r){return 255&-r.reduce(function(r,t){return r+t},0)}function e(r){return r.toString(16).toUpperCase().padStart(2,"0")}Number.isInteger=Number.isInteger||function(r){return"number"==typeof r&&isFinite(r)&&Math.floor(r)===r};var o=function(r){if(this._blocks=new Map,r&&"function"==typeof r[Symbol.iterator])for(var t of r){if(!(t instanceof Array)||2!==t.length)throw new Error("First parameter to MemoryMap constructor must be an iterable of [addr, bytes] or undefined");this.set(t[0],t[1])}else if("object"==typeof r){var e=Object.keys(r);for(var o of e)this.set(parseInt(o),r[o])}else if(null!=r)throw new Error("First parameter to MemoryMap constructor must be an iterable of [addr, bytes] or undefined")},n={size:{configurable:!0}};return o.prototype.set=function(r,t){if(!Number.isInteger(r))throw new Error("Address passed to MemoryMap is not an integer");if(r<0)throw new Error("Address passed to MemoryMap is negative");if(!(t instanceof Uint8Array))throw new Error("Bytes passed to MemoryMap are not an Uint8Array");return this._blocks.set(r,t)},o.prototype.get=function(r){return this._blocks.get(r)},o.prototype.clear=function(){return this._blocks.clear()},o.prototype.delete=function(r){return this._blocks.delete(r)},o.prototype.entries=function(){return this._blocks.entries()},o.prototype.forEach=function(r,t){return this._blocks.forEach(r,t)},o.prototype.has=function(r){return this._blocks.has(r)},o.prototype.keys=function(){return this._blocks.keys()},o.prototype.values=function(){return this._blocks.values()},n.size.get=function(){return this._blocks.size},o.prototype[Symbol.iterator]=function(){return this._blocks[Symbol.iterator]()},o.fromHex=function(n,a){void 0===a&&(a=1/0);var i,s=new o,f=0,u=0,h=0;for(r.lastIndex=0;null!==(i=r.exec(n));){if(u++,f!==i.index)throw new Error("Malformed hex file: Could not parse between characters "+f+" and "+i.index+' ("'+n.substring(f,Math.min(i.index,f+16)).trim()+'")');f=r.lastIndex;var c=i[1],l=i[2],d=new Uint8Array(c.match(/[\da-f]{2}/gi).map(function(r){return parseInt(r,16)})),p=d[0];if(p+4!==d.length)throw new Error("Mismatched record length at record "+u+" ("+i[0].trim()+"), expected "+p+" data bytes but actual length is "+(d.length-4));var y=t(d);if(parseInt(l,16)!==y)throw new Error("Checksum failed at record "+u+" ("+i[0].trim()+"), should be "+y.toString(16));var v=(d[1]<<8)+d[2],w=d[3],g=d.subarray(4);if(0===w){if(s.has(h+v))throw new Error("Duplicated data at record "+u+" ("+i[0].trim()+")");if(v+g.length>65536)throw new Error("Data at record "+u+" ("+i[0].trim()+") wraps over 0xFFFF. This would trigger ambiguous behaviour. Please restructure your data so that for every record the data offset plus the data length do not exceed 0xFFFF.");s.set(h+v,g)}else{if(0!==v)throw new Error("Record "+u+" ("+i[0].trim()+") must have 0000 as data offset.");switch(w){case 1:if(f!==n.length)throw new Error("There is data after an EOF record at record "+u);return s.join(a);case 2:h=(g[0]<<8)+g[1]<<4;break;case 3:break;case 4:h=(g[0]<<8)+g[1]<<16;break;case 5:break;default:throw new Error("Invalid record type 0x"+e(w)+" at record "+u+" (should be between 0x00 and 0x05)")}}}throw u?new Error("No EOF record at end of file"):new Error("Malformed .hex file, could not parse any registers")},o.prototype.join=function(r){void 0===r&&(r=1/0);for(var t=Array.from(this.keys()).sort(function(r,t){return r-t}),e=new Map,n=-1,a=-1,i=0,s=t.length;i<s;i++){var f=t[i],u=this.get(t[i]).length;if(a===f&&a-n<r)e.set(n,e.get(n)+u),a+=u;else{if(!(a<=f))throw new Error("Overlapping data around address 0x"+f.toString(16));e.set(f,u),n=f,a=f+u}}for(var h,c=new o,l=-1,d=0,p=t.length;d<p;d++){var y=t[d];e.has(y)&&(h=new Uint8Array(e.get(y)),c.set(y,h),l=y),h.set(this.get(y),y-l)}return c},o.overlapMemoryMaps=function(r){var t=new Set;for(var[,e]of r)for(var[o,n]of e)t.add(o),t.add(o+n.length);for(var a=Array.from(t.values()).sort(function(r,t){return r-t}),i=new Map,s=function(t,e){var o=a[t],n=a[t+1],s=[];for(var[f,u]of r){var h=Array.from(u.keys()).reduce(function(r,t){return t>o?r:Math.max(r,t)},-1);if(-1!==h){var c=u.get(h),l=o-h,d=n-h;l<c.length&&s.push([f,c.subarray(l,d)])}}s.length&&i.set(o,s)},f=0,u=a.length-1;f<u;f++)s(f);return i},o.flattenOverlaps=function(r){return new o(Array.from(r.entries()).map(function(r){var t=r[0],e=r[1];return[t,e[e.length-1][1]]}))},o.prototype.paginate=function(r,t){if(void 0===r&&(r=1024),void 0===t&&(t=255),r<=0)throw new Error("Page size must be greater than zero");for(var e,n=new o,a=Array.from(this.keys()).sort(function(r,t){return r-t}),i=0,s=a.length;i<s;i++)for(var f=a[i],u=this.get(f),h=u.length,c=f+h,l=f-f%r;l<c;l+=r){(e=n.get(l))||((e=new Uint8Array(r)).fill(t),n.set(l,e));var d=l-f,p=void 0;d<=0?(p=u.subarray(0,Math.min(r+d,h)),e.set(p,-d)):(p=u.subarray(d,d+Math.min(r,h-d)),e.set(p,0))}return n},o.prototype.getUint32=function(r,t){for(var e=Array.from(this.keys()),o=0,n=e.length;o<n;o++){var a=e[o],i=this.get(a),s=i.length;if(a<=r&&r+4<=a+s)return new DataView(i.buffer,r-a,4).getUint32(0,t)}},o.prototype.asHexString=function(r){void 0===r&&(r=16);var o=0,n=-65536,a=[];if(r<=0)throw new Error("Size of record must be greater than zero");if(r>255)throw new Error("Size of record must be less than 256");for(var i,s=new Uint8Array(6),f=new Uint8Array(4),u=Array.from(this.keys()).sort(function(r,t){return r-t}),h=0,c=u.length;h<c;h++){var l=u[h],d=this.get(l);if(!(d instanceof Uint8Array))throw new Error("Block at offset "+l+" is not an Uint8Array");if(l<0)throw new Error("Block at offset "+l+" has a negative thus invalid address");var p=d.length;if(p){if(l>n+65535&&(n=l-l%65536,o=0,s[0]=2,s[1]=0,s[2]=0,s[3]=4,s[4]=n>>24,s[5]=n>>16,a.push(":"+Array.prototype.map.call(s,e).join("")+e(t(s)))),l<n+o)throw new Error("Block starting at 0x"+l.toString(16)+" overlaps with a previous block.");o=l%65536;var y=0,v=l+p;if(v>4294967295)throw new Error("Data cannot be over 0xFFFFFFFF");for(;n+o<v;){o>65535&&(n+=65536,o=0,s[0]=2,s[1]=0,s[2]=0,s[3]=4,s[4]=n>>24,s[5]=n>>16,a.push(":"+Array.prototype.map.call(s,e).join("")+e(t(s))));for(var w=-1;o<65536&&w;)if(w=Math.min(r,v-n-o,65536-o)){f[0]=w,f[1]=o>>8,f[2]=o,f[3]=0;var g=d.subarray(y,y+w);a.push(":"+Array.prototype.map.call(f,e).join("")+Array.prototype.map.call(g,e).join("")+e((i=g,255&-(f.reduce(function(r,t){return r+t},0)+i.reduce(function(r,t){return r+t},0))))),y+=w,o+=w}}}}return a.push(":00000001FF"),a.join("\n")},o.prototype.clone=function(){var r=new o;for(var[t,e]of this)r.set(t,new Uint8Array(e));return r},o.fromPaddedUint8Array=function(r,t,e){if(void 0===t&&(t=255),void 0===e&&(e=64),!(r instanceof Uint8Array))throw new Error("Bytes passed to fromPaddedUint8Array are not an Uint8Array");for(var n=new o,a=0,i=-1,s=0,f=!1,u=r.length,h=0;h<u;h++){r[h]===t?++a>=e&&(-1!==i&&n.set(s,r.subarray(s,i+1)),f=!0):(f&&(f=!1,s=h),i=h,a=0)}return f||-1===i||n.set(s,r.subarray(s,u)),n},o.prototype.slice=function(r,t){if(void 0===t&&(t=1/0),t<0)throw new Error("Length of the slice cannot be negative");var e=new o;for(var[n,a]of this){var i=a.length;if(n+i>=r&&n<r+t){var s=Math.max(r,n),f=Math.min(r+t,n+i)-s,u=s-n;f>0&&e.set(s,a.subarray(u,u+f))}}return e},o.prototype.slicePad=function(r,t,e){if(void 0===e&&(e=255),t<0)throw new Error("Length of the slice cannot be negative");var o=new Uint8Array(t).fill(e);for(var[n,a]of this){var i=a.length;if(n+i>=r&&n<r+t){var s=Math.max(r,n),f=Math.min(r+t,n+i)-s,u=s-n;f>0&&o.set(a.subarray(u,u+f),s-r)}}return o},o.prototype.contains=function(r){for(var[t,e]of r){var o=e.length,n=this.slice(t,o).join().get(t);if(!n||n.length!==o)return!1;for(var a in e)if(e[a]!==n[a])return!1}return!0},Object.defineProperties(o.prototype,n),o});
},{}],"nnuQ":[function(require,module,exports) {
"use strict";var e=require("./z80"),r=require("../roms/MON1A"),t=require("nrf-intel-hex"),a=n(t);function n(e){return e&&e.__esModule?e:{default:e}}var i=regeneratorRuntime.mark(p),u=!1,f=!0,o=30,s=0,l=Array(65535).fill(255),c=Array(256).fill(255),y=Array(256).fill(255),v=(0,e.Z80)({mem_read:function(e){return l[e]},mem_write:function(e,r){return l[e]=r},io_read:function(e){return c[255&e]},io_write:function(e,r){var t=255&e;y[t]=r,_(),b(t,r)}}),d=Array(6).fill(0);function p(){var e,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:0,e=0;case 2:if(!(e<1e3)){t.next=10;break}if(u){t.next=5;break}return t.abrupt("return");case 5:r=v.run_instruction(),s+=r;case 7:e++,t.next=2;break;case 10:return t.next=12,s;case 12:t.next=0;break;case 14:case"end":return t.stop()}},i,this)}self.onmessage=function(e){if("INIT"===e.data.type)M(r.ROM),v.reset(),u=!0,E();else if("PAUSE"===e.data.type)f?(f=!1,u=!1):(f=!0,u=!0,E());else if("RESUME"===e.data.type);else if("RESET"===e.data.type)console.log("resetting"),v.reset(),u=!0,E();else if("SET_INPUT_VALUE"===e.data.type){var t=e.data,a=t.port,n=t.value;c[a]=n}else"SET_SPEED"===e.data.type?(o=Number(e.data.value)/100,console.log("set speed",o)):"NMI"===e.data.type?v.interrupt(!0):"UPDATE_MEMORY"===e.data.type&&(M(e.data.value),v.reset())};var m=!1,A=p();function E(){if(!m){A.next();var e=Math.floor(30*(1-Number(o)));u&&(m=!0,setTimeout(function(){m=!1,E()},e))}}function _(){for(var e=y[1],r=y[2],t=1,a=0;a<6;a++)e&t&&(d[a]=r),t<<=1}function g(){var e=new ArrayBuffer(4),r=new Uint8Array(e);return r[0]=y[0],r[1]=y[1],r[2]=y[2],e}function w(){for(var e=new ArrayBuffer(6),r=new Uint8Array(e),t=0;t<6;t++)r[t]=d[t];return e}var x=1,T=0;function b(e,r){var t=g(),a=w();if(1===e&&(127===r||255===r)){var n=r>>7;1===n&&0===x&&(T=s,s=0),x=n}s>1e4&&(T=0),self.postMessage({type:"POST_OUTPORTS",buffer:t,display:a,speaker:x,wavelength:T},[t,a])}function M(e){var r=a.default.fromHex(e),t=!0,n=!1,i=void 0;try{for(var u,f=r.keys()[Symbol.iterator]();!(t=(u=f.next()).done);t=!0)for(var o=u.value,s=r.get(o),c=o;c<o+s.length;c++)l[c]=s[c]}catch(y){n=!0,i=y}finally{try{!t&&f.return&&f.return()}finally{if(n)throw i}}}
},{"./z80":"4t/b","../roms/MON1A":"WI5q","nrf-intel-hex":"wz54"}]},{},["nnuQ"], null)
//# sourceMappingURL=worker.44b32e6b.map